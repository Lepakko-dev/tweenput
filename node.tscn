[gd_scene load_steps=5 format=3 uid="uid://dunt68n00nysa"]

[ext_resource type="Script" uid="uid://bqlxodq8jt0vb" path="res://tweenput_test.gd" id="1_sy5k4"]
[ext_resource type="Script" uid="uid://bsihlb1wnkfjg" path="res://Tweenput/tweenterpreter.gd" id="2_j2q8x"]
[ext_resource type="Script" uid="uid://co5sepgqjdyyo" path="res://Tweenput/tweenput_parser.gd" id="3_112p8"]
[ext_resource type="Texture2D" uid="uid://2gjjcw6bd5bg" path="res://icon.svg" id="4_e2u21"]

[node name="Node" type="Node"]
script = ExtResource("1_sy5k4")

[node name="TIn" type="TextEdit" parent="."]
anchors_preset = -1
anchor_right = 0.5
anchor_bottom = 1.0
offset_bottom = -50.0
grow_vertical = 2
text = "SET target.global_scale, Vector2(5,0.25)
SET target.self_modulate, Color(1,1,1,1)
SET completed, 0
SET timer, 5
bar_timer
LINK \"subroutine\", \"wait_input\", 1
EMIT \"subroutine\"
WAIT bar_timer
JMP \"ok\", completed
WAIT \"fail\"
END
ok:
WAIT \"success\"
END

wait_input:
JMP \"end\", list.size() <= 0
SET action, list.pop_front()
WINPUT action
JMP \"wait_input\", 1
end:
SET completed, 1
STOP bar_timer
END

bar_timer{ PROPERTY target, \"global_scale\", Vector2(0,0.25), timer }
success{ property target, \"self_modulate\", Color(0.15,1,0.15,1), 0.15 }
fail{ property target, \"self_modulate\", Color(0,0,0,0), 0.15 }"

[node name="TOut" type="TextEdit" parent="."]
anchors_preset = -1
anchor_left = 0.5
anchor_right = 1.0
anchor_bottom = 1.0
offset_bottom = -50.0
grow_horizontal = 0
grow_vertical = 2

[node name="RichTextLabel" type="RichTextLabel" parent="."]
anchors_preset = 12
anchor_top = 1.0
anchor_right = 1.0
anchor_bottom = 1.0
offset_left = 50.0
offset_top = -50.0
offset_right = -50.0
grow_horizontal = 2
grow_vertical = 0
bbcode_enabled = true
text = "Errors here"
vertical_alignment = 1

[node name="Button" type="Button" parent="."]
anchors_preset = 2
anchor_top = 1.0
anchor_bottom = 1.0
offset_left = 5.0
offset_top = -45.0
offset_right = 45.0
offset_bottom = -5.0
grow_vertical = 0
theme_override_font_sizes/font_size = 14
text = "RUN"

[node name="Tweenterpreter" type="Node" parent="."]
script = ExtResource("2_j2q8x")
metadata/_custom_type_script = "uid://bsihlb1wnkfjg"

[node name="TweenputParser" type="Node" parent="Tweenterpreter"]
script = ExtResource("3_112p8")
instructions = Dictionary[String, Callable]({
"ANIM": Callable(),
"CALL": Callable(),
"EMIT": Callable(),
"END": Callable(),
"JMP": Callable(),
"LINK": Callable(),
"QTE": Callable(),
"RET": Callable(),
"SET": Callable(),
"STOP": Callable(),
"SWAP": Callable(),
"UNLINK": Callable(),
"WAIT": Callable(),
"WANIM": Callable(),
"WINPUT": Callable(),
"WQTE": Callable()
})
metadata/_custom_type_script = "uid://co5sepgqjdyyo"

[node name="Target" type="Sprite2D" parent="."]
position = Vector2(870, 303)
texture = ExtResource("4_e2u21")
